<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>The GOSH ‘Major Version’ open publication process - 3&nbsp; DRIVE open publication proposal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./responsibility-process.html" rel="next">
<link href="./publication-process.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./open-publication-proposal.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">DRIVE open publication proposal</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">The GOSH ‘Major Version’ open publication process</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./publication-process.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Open publication full process</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./open-publication-proposal.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">DRIVE open publication proposal</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./responsibility-process.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">“Major Version” Open Publication Responsibility Process</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./registration-pro-forma.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Open Publication Review Pro Forma</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">3.1</span> Summary</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">3.2</span> Introduction</a></li>
  <li><a href="#open-publication-major-versions" id="toc-open-publication-major-versions" class="nav-link" data-scroll-target="#open-publication-major-versions"><span class="header-section-number">3.3</span> Open Publication (Major Versions)</a>
  <ul class="collapse">
  <li><a href="#description" id="toc-description" class="nav-link" data-scroll-target="#description"><span class="header-section-number">3.3.1</span> Description</a></li>
  <li><a href="#governance" id="toc-governance" class="nav-link" data-scroll-target="#governance"><span class="header-section-number">3.3.2</span> Governance</a></li>
  <li><a href="#protocol" id="toc-protocol" class="nav-link" data-scroll-target="#protocol"><span class="header-section-number">3.3.3</span> Protocol</a></li>
  <li><a href="#review-requirements1" id="toc-review-requirements1" class="nav-link" data-scroll-target="#review-requirements1"><span class="header-section-number">3.3.4</span> Review Requirements</a></li>
  </ul></li>
  <li><a href="#open-coding" id="toc-open-coding" class="nav-link" data-scroll-target="#open-coding"><span class="header-section-number">3.4</span> Open Coding</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-dpc-proposal" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">DRIVE open publication proposal</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">3.1</span> Summary</h2>
<p>This document covers the details of implementation of various types of open publication as agreed with the Data Partnerships Committee at GOSH. It includes a number of scenarios and requirements regarding review of materials and ongoing audit of regularly updated repos. This document does not contain a full breakdown of the principle of open publication, but rather focuses on delivery of that principle for code and documentation produced by members of the DRIVE team and beyond at GOSH.</p>
</section>
<section id="introduction" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="introduction"><span class="header-section-number">3.2</span> Introduction</h2>
<p>The principle of open sharing of information within the NHS and beyond has been established at various levels, from government reviews down to specific agreement with the Data Partnerships Committee here at GOSH. The benefits of sharing intelligence, insights and best practice have been recognized therefore it is required that a workable process for implementing and overseeing open sharing is created. This process should balance the risks of dissemination of privileged and personally identifiable information (PPII), and risks around information security, against the benefits of providing and using openly shared resources with the rest of the NHS and the rest of the world.</p>
<p>The recommended route for open publication is via Github, a cloud-based Git repository hosting solution owned by Microsoft and available to be used for free, and this would be the intended target of every project openly published by the DRIVE team. The process for sharing works on the principle of “repositories” (or “repos”) which are project-specific sets of files (usually in a file structure identical to subfolders on a network drive) alongside a complete history of all those files, which can be selectively modified as required. This can be accessed by anyone on the Internet and the files are published with a permissive license allowing the use of the files for more-or-less any purpose and without any warranty.</p>
<p>This document will walk through the various protocols for open publication to be used in the Trust, and detail the steps and documentation required prior to open publication of any project within the team. This will ensure that repositories of documentation and code are published expediently while retaining suitable safeguards to mitigate any risks of inadvertent data sharing and/or of security-compromised code being deployed into the Trust. The following routes for publication:</p>
<ol type="1">
<li>Publication at major versions,
<ol type="a">
<li>Document publication,</li>
<li>Code publication,</li>
</ol></li>
<li>Open Coding (to be defined).</li>
</ol>
</section>
<section id="open-publication-major-versions" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="open-publication-major-versions"><span class="header-section-number">3.3</span> Open Publication (Major Versions)</h2>
<section id="description" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="description"><span class="header-section-number">3.3.1</span> Description</h3>
<p>Often, development of a body of work on a particular project (either documentation or code) occurs in phases of “drafting”, then review before finalization of a version, repeated multiple times – particularly when that work covers a number of topics/areas/requirements. This drafting process can contain content that requires review prior to publication. At each review, prior to finalization of a version, the content is checked for any privileged information or patient data, which is removed prior to version finalization. Open publication of this work in a repo therefore requires a robust review process, taking into account infosec requirements, and legal requirements regarding publishable content.</p>
<p>In this model of development and publication, the repo is only EVER pushed to the public repo. New versions are then merged into that pushed version. The repo is never pulled from that public repo and all development work occurs privately inside the GOSH network boundary according to our previously established development processes.</p>
</section>
<section id="governance" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="governance"><span class="header-section-number">3.3.2</span> Governance</h3>
<p>All projects working towards repositories for open publication will be registered with the DRE Senior Leadership Team and a record will be kept as to decisions on publication. Please see Appendix 1 for the agreed registration form. For projects that are approved, repositories will be developed internally and published according to the below protocol. <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Audits of all code-based repositories will be undertaken on a quarterly basis, to ensure that malicious dependencies / vulnerabilities have not been identified in the repository. This audit will be presented to the Data Partnerships Committee (DPC) for review. This protocol will be reviewed annually to ensure that it remains fit-for-purpose and a report on its suitability and any proposed updates will be brought to the DPC for review and approval.</p>
</section>
<section id="protocol" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="protocol"><span class="header-section-number">3.3.3</span> Protocol</h3>
<ol type="1">
<li><p><strong>Registration:</strong> Projects with a component to be openly published will be registered and authorized as described above,</p></li>
<li><p><strong>Development:</strong> All repository contents are developed in an internal repo (GOSH Gitlab) according to current internal code development processes and/or standard document drafting procedures within the Trust,<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p></li>
</ol>
<ol start="3" type="1">
<li><p><strong>Major version finalization:</strong> Prior to version finalization, all repo contents will be manually reviewed by a team member who did not develop the repo and any issues raised will be corrected and double-checked, <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p></li>
<li><p><strong>Open publication:</strong> The internal repo will “merged” into the corresponding open repo on Github (or a new repo as required) using the standard update process, <a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p></li>
<li><p><strong>Review:</strong> Openly available repos will be periodically audited as detailed above. <a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p></li>
</ol>
</section>
<section id="review-requirements1" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="review-requirements1"><span class="header-section-number">3.3.4</span> Review Requirements<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></h3>
<p>Repos containing either code or documents for publication require specific types of review, as detailed below.</p>
<ol type="1">
<li><strong>General requirements:</strong>
<ol type="a">
<li>Repos must not contain any Personally Identifiable Information relating either to patients or to staff,</li>
<li>Repos must not contain any “secrets” – passwords or API keys or other information that might expose the internal structure of ICT infrastructure in GOSH,</li>
</ol></li>
<li><strong>Code Review Requirements:</strong>
<ol type="a">
<li>Parts of code containing business/analytical logic must be covered by unit tests to provide assurance that the code works in the way that it says it works,</li>
<li>Code must be free of known malicious dependencies, and</li>
<li>Code must be suitably explained in a README file in the repo – detailing installation and use of the contents of the repo,</li>
</ol></li>
<li><strong>Document Review Requirements:</strong>
<ol type="a">
<li>Documents must not contain privileged information – for instance business or clinically sensitive information or financial details relating to the Trust.</li>
</ol></li>
</ol>
</section>
</section>
<section id="open-coding" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="open-coding"><span class="header-section-number">3.4</span> Open Coding</h2>
<p>The government and NHS central bodies recommend open coding – development of code directly on an openly available repository (e.g.&nbsp;Github, owned by Microsoft), however this requires more rigorous ongoing processes for monitoring code, so will be developed once the open publication protocol above has been agreed and implemented.</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p><strong>PLEASE NOTE</strong>: the protocol in this document has be superseded by the Standard Operating Procedure detailed in the Responsibility Process Document (<a href="responsibility-process.html"><span>Chapter&nbsp;4</span></a>).<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Usually documents are developed on internal systems in the Word format on Sharepoint. While this is effective for collaborative development within the Trust, open publication is much more effective when done in markdown format – a text format containing all markup specifications explicitly in the text (e.g.&nbsp;“#” is used to denote a title). Therefore, development of material for open publication will require a transcription into markdown format. Manual review will be repeated on the transcribed version of documents, prior to open publication.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><strong>PLEASE NOTE</strong>: the protocol in this document has be superseded by the Standard Operating Procedure detailed in the Responsibility Process Document (<a href="responsibility-process.html"><span>Chapter&nbsp;4</span></a>).<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><strong>PLEASE NOTE</strong>: the protocol in this document has be superseded by the Standard Operating Procedure detailed in the Responsibility Process Document (<a href="responsibility-process.html"><span>Chapter&nbsp;4</span></a>).<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><strong>PLEASE NOTE</strong>: the protocol in this document has be superseded by the Standard Operating Procedure detailed in the Responsibility Process Document (<a href="responsibility-process.html"><span>Chapter&nbsp;4</span></a>).<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><strong>PLEASE NOTE</strong>: the protocol in this document has be superseded by the Standard Operating Procedure detailed in the Responsibility Process Document (<a href="responsibility-process.html"><span>Chapter&nbsp;4</span></a>).<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./publication-process.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Open publication full process</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./responsibility-process.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">“Major Version” Open Publication Responsibility Process</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>